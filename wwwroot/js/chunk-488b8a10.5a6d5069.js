(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-488b8a10"],{"0a3a":function(e,t,n){"use strict";n("2c28")},1393:function(e,t,n){"use strict";var c=n("23e7"),r=n("857a"),a=n("af03");c({target:"String",proto:!0,forced:a("big")},{big:function(){return r(this,"big","","")}})},"2c28":function(e,t,n){},"857a":function(e,t,n){var c=n("1d80"),r=n("577e"),a=/"/g;e.exports=function(e,t,n,o){var i=r(c(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+r(o).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"}},af03:function(e,t,n){var c=n("d039");e.exports=function(e){return c((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},af19:function(e,t,n){"use strict";n.r(t);var c=n("8bbf"),r=Object(c["createElementVNode"])("div",{class:"card-header"},[Object(c["createElementVNode"])("span",null,"请完成安全验证")],-1),a={class:"card-body"},o={style:{width:"272px",height:"169px",margin:"auto"}},i={id:"captchaTip"},s=["src"],u=["src"],l=Object(c["createTextVNode"])("确认"),p={class:"card-body"};function f(e,t,n,f,b,d){var h=Object(c["resolveComponent"])("el-col"),m=Object(c["resolveComponent"])("el-row"),g=Object(c["resolveComponent"])("el-button"),O=Object(c["resolveComponent"])("el-card"),j=Object(c["resolveComponent"])("el-result");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["withDirectives"])(Object(c["createVNode"])(m,{span:24,onTouchend:e.remove},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{style:{"max-width":"510px","justify-content":"center",margin:"auto"}},{header:Object(c["withCtx"])((function(){return[r]})),default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",a,[Object(c["createVNode"])(m,{class:"demo-autocomplete"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("img",{id:"cpcImg",src:e.imgUrl,onClick:t[0]||(t[0]=function(){return f.captchaTipclick&&f.captchaTipclick.apply(f,arguments)})},null,8,s),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.pointlist,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"radio",key:e.tipIndex,style:Object(c["normalizeStyle"])({left:e.left+"px",top:e.top+"px"})},Object(c["toDisplayString"])(e.tipIndex),5)})),128))])]),Object(c["createElementVNode"])("img",{id:"cpcTipImg",src:e.imgUrl2,width:"275"},null,8,u)]})),_:1})]})),_:1}),Object(c["createVNode"])(g,{type:"primary",size:"medium",round:"",onClick:f.cap2click},{default:Object(c["withCtx"])((function(){return[l]})),_:1},8,["onClick"])])]})),_:1})]})),_:1})]})),_:1},8,["onTouchend"]),[[c["vShow"],e.ShowCaptcha2]]),Object(c["withDirectives"])(Object(c["createVNode"])(m,{span:24,onTouchend:e.remove},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{style:{"max-width":"510px","justify-content":"center",margin:"auto"}},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",p,[Object(c["withDirectives"])(Object(c["createVNode"])(j,{icon:"error",title:"错误","sub-title":e.message},null,8,["sub-title"]),[[c["vShow"],!e.ShowOK]]),Object(c["withDirectives"])(Object(c["createVNode"])(j,{icon:"success",title:"成功","sub-title":e.message},null,8,["sub-title"]),[[c["vShow"],e.ShowOK]])])]})),_:1})]})),_:1})]})),_:1},8,["onTouchend"]),[[c["vShow"],!e.ShowCaptcha2]])],64)}var b=n("5530"),d=n("1da1"),h=(n("96cf"),n("1393"),n("c96a"),n("159b"),n("be66")),m=n("365c"),g={props:{id:{type:String,default:""}},setup:function(e){var t=Object(c["reactive"])({imgUrl:"",imgUrl2:"",ShowCaptcha2:!0,ShowOK:!1,message:"访问错误",pointlist:[]}),n=function(){var n=Object(d["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!=e.id){n.next=3;break}return t.ShowCaptcha2=!1,n.abrupt("return",!1);case 3:return n.next=5,Object(m["b"])(e.id);case 5:if(c=n.sent,t.ShowCaptcha2=c.success,c.success){n.next=10;break}return t.message=c.message,n.abrupt("return",!1);case 10:t.imgUrl="data:image/png;base64,"+c.data.big,t.imgUrl2="data:image/png;base64,"+c.data.small;case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(c["onMounted"])(n);var r=function(){var n=Object(d["a"])(regeneratorRuntime.mark((function n(){var c,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(4==t.pointlist.length){n.next=2;break}return n.abrupt("return");case 2:return c=h["ElLoading"].service({lock:!0,text:"验证中请稍候.."}),r=[],t.pointlist.forEach((function(e){r.push({tipIndex:e.tipIndex,offsetX:e.offsetX,offsetY:e.offsetY})})),n.next=7,Object(m["g"])({Phone:e.id,point:r});case 7:if(a=n.sent,c.close(),!a.success){n.next=17;break}return h["ElMessage"].success("认证成功"),t.ShowCaptcha2=!1,t.message="请返回机器人输入验证码!",t.ShowOK=!0,n.abrupt("return",!0);case 17:if(t.pointlist=[],666!=a.data.status){n.next=24;break}h["ElMessage"].error("验证失败,请重试"),t.imgUrl="data:image/png;base64,"+a.data.big,t.imgUrl2="data:image/png;base64,"+a.data.small,n.next=27;break;case 24:return t.ShowCaptcha2=!1,h["ElMessage"].error(a.message),n.abrupt("return",!1);case 27:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a=function(e){if(4!=t.pointlist.length){var n=t.pointlist.length+1,c=e.currentTarget.offsetLeft+e.offsetX-15,r=e.currentTarget.offsetTop+e.offsetY-15;console.log({tipIndex:n,left:c,top:r}),t.pointlist.push({tipIndex:n,left:c,top:r,offsetX:e.offsetX,offsetY:e.offsetY})}};return Object(b["a"])(Object(b["a"])({},Object(c["toRefs"])(t)),{},{getInfo:n,cap2click:r,captchaTipclick:a})}},O=(n("0a3a"),n("6b0d")),j=n.n(O);const w=j()(g,[["render",f]]);t["default"]=w},c96a:function(e,t,n){"use strict";var c=n("23e7"),r=n("857a"),a=n("af03");c({target:"String",proto:!0,forced:a("small")},{small:function(){return r(this,"small","","")}})}}]);